(this["webpackJsonplohas-farm"]=this["webpackJsonplohas-farm"]||[]).push([[0],{38:function(e,t,a){e.exports=a.p+"static/media/defaultImage.bbded77b.jpg"},39:function(e,t,a){e.exports=a.p+"static/media/spinner.f4404720.gif"},44:function(e,t,a){e.exports=a(77)},72:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),c=a.n(l),o=a(12),s=a(13),u=Object(n.createContext)(),i=Object(n.createContext)(),m=function(){var e=Object(n.useContext)(u).user;return r.a.createElement("div",{style:{backgroundColor:"#3f3e3e",height:"30px",color:"white"}},r.a.createElement("div",{className:"container"},r.a.createElement("ul",null,r.a.createElement("li",null,"Hello, ",e&&e.name,"!! "))))},p=function(){var e=Object(n.useContext)(u),t=Object(n.useContext)(i),a=e.isAuthenticated,l=e.logout,c=t.clearPosts,s=r.a.createElement(n.Fragment,null,r.a.createElement(o.b,{to:"/dashboard"},r.a.createElement("i",{className:"fas fa-tools"})),r.a.createElement("a",{onClick:function(){l(),c()},href:"#!"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})," ",r.a.createElement("span",{className:"hide-sm"},"Logout")));return r.a.createElement(n.Fragment,null,r.a.createElement("nav",{className:"navbar bg-blue"},r.a.createElement("h1",null,r.a.createElement(o.b,{to:"/"},r.a.createElement("img",{src:"lohas-logo-white.svg",alt:"lohas-white",style:{height:"8vh"}}))),r.a.createElement("ul",null,r.a.createElement(o.b,{to:"/"},r.a.createElement("i",{className:"fas fa-home"})),r.a.createElement(o.b,{to:"/blog"},"Blog"),r.a.createElement("a",{href:"mailto:name@email.com?Subject=Inquiry%20from%20the%20website"},"Contact"),r.a.createElement(o.b,{to:"/shop"},r.a.createElement("li",null,r.a.createElement("i",{className:"fas fa-shopping-cart"}))),a?s:null)),null!==a&&r.a.createElement(m,null))},d=function(){return r.a.createElement("div",{className:"footer bg-dark",style:{fontSize:"12px"}},r.a.createElement("div",{className:"container"},r.a.createElement("ul",null,r.a.createElement("li",null,"Copyright @ Lohas Farm 2019"),r.a.createElement("li",null," | "),r.a.createElement("li",null,"Site Map"),r.a.createElement("li",null," | "),r.a.createElement("li",null,"Contact"))))},E=Object(n.createContext)(),f=function(){var e=Object(n.useContext)(E);return e.alerts.length>0&&e.alerts.map((function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.type)},r.a.createElement("i",{className:"fas fa-info-circle"})," ",e.msg)}))},g=function(){return r.a.createElement("div",{className:"display"},r.a.createElement(f,null))},b=a(38),h=a.n(b),y=function(e){var t=e.post,a=t._id,n=t.title,l=t.content,c=t.imgUrl,o=t.date;return r.a.createElement("div",{className:"card-post",keys:a},r.a.createElement("h3",null,n.toUpperCase()),r.a.createElement("img",{className:"image",src:c||h.a}),r.a.createElement("div",{className:"card-container"},r.a.createElement("h6",null,"Posted on ",o.slice(0,10)),r.a.createElement("p",null,l)))},v=a(39),O=a.n(v),C=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("img",{src:O.a,style:{width:"200px",margin:"auto",display:"block"},alt:"Loading... "}))},R=function(e){var t=e.page,a=Object(n.useContext)(i),l=a.posts,c=(a.filtered,a.loading),o=a.getPosts;return Object(n.useEffect)((function(){o()}),[]),null===l||0!==l.length||c?r.a.createElement(n.Fragment,null,null===l||c?r.a.createElement(C,null):l.map((function(e){return e.section==="".concat(t)?r.a.createElement(y,{key:e._id,post:e}):null}))):r.a.createElement("h4",null,"Loading Error: unable to load any posts")},S=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(g,null),r.a.createElement("div",{className:"container"},r.a.createElement(R,{page:"front page"})))},x=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement(R,{page:"product"})))},j=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(g,null),r.a.createElement("div",{className:"container"},r.a.createElement(R,{page:"blog"})))},T=function(e){Object(n.useEffect)((function(){setTimeout((function(){e.history.push("/")}),2e3)}));return r.a.createElement(n.Fragment,null,r.a.createElement(g,null),r.a.createElement(s.b,null,r.a.createElement((function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"card"},r.a.createElement("h1",null,r.a.createElement("span",{className:"text-primary"},r.a.createElement("i",{className:"fas fa-exclamation-triangle"})," Page Not Found or Under Construction!!"))))}),null)))},_=function(e){var t=e.post,a=Object(n.useContext)(i),l=a.deletePost,c=a.setCurrent,o=a.clearCurrent,s=t._id,u=t.title,m=t.content;return r.a.createElement("div",{className:"card bg-light",key:s},r.a.createElement("h3",{className:"text-primary text-left"},u),r.a.createElement("p",null,m.slice(0,150),"..."),r.a.createElement("p",null,r.a.createElement("button",{className:"btn btn-dark btn-sm",onClick:function(){return c(t)}},"Edit"),r.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:function(){l(s),o()}},"Delete")))},P=a(80),N=a(79),k=function(){var e=Object(n.useContext)(i),t=e.posts,a=e.loading,l=e.getAllPosts,c=e.filtered;return Object(n.useEffect)((function(){l()}),[]),null===t||0!==t.length||a?r.a.createElement(n.Fragment,null,null===t||a?r.a.createElement(C,null):r.a.createElement(P.a,null,null!==c?c.map((function(e){return r.a.createElement(N.a,{key:e._id,timeout:500,classNames:"item"},r.a.createElement(_,{post:e}))})):t.map((function(e){return r.a.createElement(N.a,{key:e._id,timeout:500,classNames:"item"},r.a.createElement(_,{post:e}))})))):r.a.createElement("h4",null,"Loading Error: unable to load any posts")},A=function(){var e=Object(n.useContext)(i),t=e.filterPosts,a=e.clearFilter,l=e.filtered,c=Object(n.useRef)("");Object(n.useEffect)((function(){null===l&&(c.current.value="")}));return r.a.createElement("form",null,r.a.createElement("input",{ref:c,type:"text",placeholder:"Filter Posts",onChange:function(e){""!==c.current.value?t(e.target.value):a()}}))},L=a(16),w=a(2),F=a(11),U=function(){var e=Object(n.useContext)(i),t=e.addPost,a=e.updatePost,l=e.current,c=e.clearCurrent;Object(n.useEffect)((function(){m(null!==l?l:{title:"",section:"",imgUrl:"",content:"",status:"draft"})}),[e,l]);var o=Object(n.useState)({title:"",section:"",imgUrl:"",content:"",status:"draft"}),s=Object(F.a)(o,2),u=s[0],m=s[1],p=u.title,d=u.section,E=u.imgUrl,f=u.content,g=u.status,b=function(e){m(Object(w.a)({},u,Object(L.a)({},e.target.name,e.target.value)))},h=function(){c()};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),null===l?t(u):a(u),h()},className:"card bg-light"},r.a.createElement("h2",{className:"text-primary"},l?"Edit Post":"Create a New Post"),r.a.createElement("h4",null,"Title"),r.a.createElement("input",{type:"text",placeholer:"title",name:"title",value:p,onChange:b}),r.a.createElement("h4",null,"Add Image Url"),r.a.createElement("input",{type:"text",placeholer:"image url",name:"imgUrl",value:E,onChange:b}),r.a.createElement("h4",null,"Post Location"),r.a.createElement("input",{type:"radio",name:"section",value:"front page",checked:"front page"===d,onChange:b})," ","Front Page"," ",r.a.createElement("input",{type:"radio",name:"section",value:"blog",checked:"blog"===d,onChange:b})," ","Blog Page"," ",r.a.createElement("input",{type:"radio",name:"section",value:"product",checked:"product"===d,onChange:b})," ","Product Page ",r.a.createElement("h4",null,"Post Status")," ",r.a.createElement("input",{type:"radio",name:"status",value:"draft",checked:"draft"===g,onChange:b})," ","Draft"," ",r.a.createElement("input",{type:"radio",name:"status",value:"completed",checked:"completed"===g,onChange:b})," ","Completed ",r.a.createElement("h4",null,"Content"),r.a.createElement("textarea",{type:"text",placeholer:"content",name:"content",value:f,onChange:b}),r.a.createElement("div",null,r.a.createElement("input",{type:"submit",value:l?"Update Post":"Add Post",className:"btn btn-primary btn-block"})),l&&r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-light btn-block",onClick:h},"Clear")))},I=function(){var e=Object(n.useContext)(u);return Object(n.useEffect)((function(){e.loadUser()}),[]),r.a.createElement("div",{className:"container grid-2"},r.a.createElement("div",null,r.a.createElement(U,null)),r.a.createElement("div",{className:"container"},r.a.createElement(A,null),r.a.createElement(k,{page:"blog"})))},D=function(e){var t=Object(n.useContext)(E),a=Object(n.useContext)(u),l=t.setAlert,c=a.error,o=a.login,s=a.clearErrors,i=a.isAuthenticated;Object(n.useEffect)((function(){i&&e.history.push("/dashboard"),"Invalid Credentials!"===c&&(l(c,"danger"),s())}),[c,i,e.history,s,l]);var m=Object(n.useState)({email:"",password:""}),p=Object(F.a)(m,2),d=p[0],f=p[1],b=d.email,h=d.password,y=function(e){f(Object(w.a)({},d,Object(L.a)({},e.target.name,e.target.value)))};return r.a.createElement(n.Fragment,null,r.a.createElement(g,null),r.a.createElement("div",{className:"container p-1"},r.a.createElement("div",{className:"form-container"},r.a.createElement("h1",null,r.a.createElement("span",{className:"text-primary"},"Dashboard Login")),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""===b||""===h?l("Please fill in all fields","danger"):o({email:b,password:h})}},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",name:"email",value:b,autoComplete:"email",onChange:y,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:h,autoComplete:"password",onChange:y,required:!0})),r.a.createElement("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"})))))},G=a(42),q=function(e){var t=e.component,a=Object(G.a)(e,["component"]),l=Object(n.useContext)(u).isAuthenticated;return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return l?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}}))},B=a(3),H=a.n(B),M=a(8),J=a.n(M),V=a(17),z=function(e,t){switch(t.type){case"GET_POSTS":case"GET_ALL_POSTS":return Object(w.a)({},e,{posts:t.payload,loading:!1});case"ADD_POST":return Object(w.a)({},e,{posts:[t.payload].concat(Object(V.a)(e.posts)),loading:!1});case"DELETE_POST":return Object(w.a)({},e,{posts:e.posts.filter((function(e){return e._id!==t.payload})),loading:!1});case"CLEAR_POSTS":return Object(w.a)({},e,{posts:null,filtered:null,error:null,current:null});case"UPDATE_POST":return Object(w.a)({},e,{posts:e.posts.map((function(e){return e._id===t.payload_id?t.payload:e}))});case"SET_CURRENT":return Object(w.a)({},e,{current:t.payload});case"CLEAR_CURRENT":return Object(w.a)({},e,{current:null});case"FILTER_POSTS":return Object(w.a)({},e,{filtered:e.posts.filter((function(e){var a=new RegExp("".concat(t.payload),"gi");return e.title.match(a)}))});case"CLEAR_FILTER":return Object(w.a)({},e,{filtered:null});case"POST_ERROR":return Object(w.a)({},e,{error:t.payload});default:return e}},K=function(e){var t=Object(n.useReducer)(z,{posts:null,current:null,filtered:null}),a=Object(F.a)(t,2),l=a[0],c=a[1];return r.a.createElement(i.Provider,{value:{posts:l.posts,current:l.current,filtered:l.filtered,error:l.error,getPosts:function(){var e;return H.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H.a.awrap(J.a.get("/api/posts/"));case 3:e=t.sent,c({type:"GET_POSTS",payload:e.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),c({type:"POST_ERROR",error:t.t0.response.msg});case 10:case"end":return t.stop()}}),null,null,[[0,7]])},getAllPosts:function(){var e;return H.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H.a.awrap(J.a.get("/api/posts/dashboard"));case 3:e=t.sent,c({type:"GET_ALL_POSTS",payload:e.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),c({type:"POST_ERROR",error:t.t0.response.msg});case 10:case"end":return t.stop()}}),null,null,[[0,7]])},addPost:function(e){var t,a;return H.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{"Context-Type":"application/json"}},n.prev=1,n.next=4,H.a.awrap(J.a.post("/api/posts/dashboard",e,t));case 4:a=n.sent,c({type:"ADD_POST",payload:a.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),c({type:"POST_ERROR",payload:n.t0.response.msg});case 11:case"end":return n.stop()}}),null,null,[[1,8]])},updatePost:function(e){var t,a;return H.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{"Context-Type":"application/json"}},n.prev=1,n.next=4,H.a.awrap(J.a.put("/api/posts/".concat(e._id),e,t));case 4:a=n.sent,c({type:"UPDATE_POST",payload:a.data}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),c({type:"POST_ERROR",payload:n.t0.response.msg});case 11:case"end":return n.stop()}}),null,null,[[1,8]])},deletePost:function(e){return H.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,H.a.awrap(J.a.delete("/api/posts/dashboard/".concat(e)));case 3:c({type:"DELETE_POST",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),c({type:"POST_ERROR",payload:t.t0.response.msg});case 9:case"end":return t.stop()}}),null,null,[[0,6]])},clearPosts:function(){c({type:"CLEAR_POSTS"})},clearCurrent:function(){c({type:"CLEAR_CURRENT"})},setCurrent:function(e){c({type:"SET_CURRENT",payload:e})},filterPosts:function(e){c({type:"FILTER_POSTS",payload:e})},clearFilter:function(){c({type:"CLEAR_FILTER"})}}},e.children)},Q=a(40),W=a.n(Q),X=function(e,t){switch(t.type){case"SET_ALERT":return[].concat(Object(V.a)(e),[t.payload]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==t.payload}));default:return e}},Y=function(e){var t=Object(n.useReducer)(X,[]),a=Object(F.a)(t,2),l=a[0],c=a[1];return r.a.createElement(E.Provider,{value:{alerts:l,setAlert:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n=W.a.v4();c({type:"SET_ALERT",payload:{msg:e,type:t,id:n}}),setTimeout((function(){return c({type:"REMOVE_ALERT",payload:n})}),a)}}},e.children)},Z=function(e,t){switch(t.type){case"USER_LOADED":return Object(w.a)({},e,{isAuthenticated:!0,loading:!1,user:t.payload});case"REGISTER_SUCCESS":case"LOGIN_SUCCESS":return localStorage.setItem("token",t.payload.token),Object(w.a)({},e,{},t.payload,{isAuthenticated:!0,loading:!1});case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":return localStorage.removeItem("token"),Object(w.a)({},e,{token:null,isAuthenticated:!1,loading:!1,user:null,error:t.payload});case"CLEAR_ERRORS":return Object(w.a)({},e,{error:null});default:return e}},$=function(e){e?J.a.defaults.headers.common["x-auth-token"]=e:delete J.a.defaults.headers.common["x-auth-token"]},ee=function(e){var t={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null,error:null},a=Object(n.useReducer)(Z,t),l=Object(F.a)(a,2),c=l[0],o=l[1],s=function(){var e;return H.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return localStorage.token&&$(localStorage.token),t.prev=1,t.next=4,H.a.awrap(J.a.get("/api/auth"));case 4:e=t.sent,o({type:"USER_LOADED",payload:e.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o({type:"AUTH_ERROR"});case 11:case"end":return t.stop()}}),null,null,[[1,8]])};return r.a.createElement(u.Provider,{value:{token:c.token,isAuthenticated:c.isAuthenticated,loading:c.loading,user:c.user,error:c.error,register:function(e){var t,a;return H.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{"Content-Type":"application/json"}},n.prev=1,n.next=4,H.a.awrap(J.a.post("/api/users",e,t));case 4:a=n.sent,o({type:"REGISTER_SUCCESS",payload:a.data}),s(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),o({type:"REGISTER_FAIL",payload:n.t0.response.data.msg});case 12:case"end":return n.stop()}}),null,null,[[1,9]])},loadUser:s,login:function(e){var t,a;return H.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t={headers:{"Content-Type":"application/json"}},n.prev=1,n.next=4,H.a.awrap(J.a.post("/api/auth",e,t));case 4:a=n.sent,o({type:"LOGIN_SUCCESS",payload:a.data}),s(),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),o({type:"LOGIN_FAIL",payload:n.t0.response.data.msg});case 12:case"end":return n.stop()}}),null,null,[[1,9]])},logout:function(){return o({type:"LOGOUT"})},clearErrors:function(){o({type:"CLEAR_ERRORS"})}}},e.children)},te=(a(72),a(21));localStorage.token&&$(localStorage.token);var ae=function(){return console.log(typeof isAuthenticated),r.a.createElement(n.Fragment,null,r.a.createElement(ee,null,r.a.createElement(K,null,r.a.createElement(Y,null,r.a.createElement(o.a,null,r.a.createElement(te.StickyContainer,null,r.a.createElement(te.Sticky,null,(function(e){var t=e.style;return r.a.createElement("header",{style:t},r.a.createElement(p,null))})),r.a.createElement(s.d,null,r.a.createElement(q,{exact:!0,path:"/dashboard",component:I}),r.a.createElement(s.b,{exact:!0,path:"/",component:S}),r.a.createElement(s.b,{exact:!0,path:"/product",component:x}),r.a.createElement(s.b,{exact:!0,path:"/blog",component:j}),r.a.createElement(s.b,{exact:!0,path:"/login",component:D}),r.a.createElement(s.b,{path:"*",component:T})),r.a.createElement(d,null)))))))},ne=a(41);c.a.render(r.a.createElement(ne.a,null,r.a.createElement(ae,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.8e098878.chunk.js.map